{"version":3,"sources":["../../node_modules/mediabox/dist/mediabox.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"mediabox.14a23168.map","sourceRoot":"../../../source/js","sourcesContent":["/*! mediabox v1.1.3 | (c) 2018 Pedro Rogerio | https://github.com/pinceladasdaweb/mediabox */\n(function (root, factory) {\n    \"use strict\";\n    if (typeof define === 'function' && define.amd) {\n        define([], factory);\n    } else if (typeof exports === 'object') {\n        module.exports = factory();\n    } else {\n        root.MediaBox = factory();\n    }\n}(this, function () {\n    \"use strict\";\n\n    var MediaBox = function (element, params) {\n        var default_params = { autoplay: '1' },\n            params = params || 0;\n\n        if (!this || !(this instanceof MediaBox)) {\n            return new MediaBox(element, params);\n        }\n\n        if (!element) {\n            return false;\n        }\n\n        this.params = Object.assign(default_params, params);\n        this.selector = element instanceof NodeList ? element : document.querySelectorAll(element);\n        this.root     = document.querySelector('body');\n        this.run();\n    };\n\n    MediaBox.prototype = {\n        run: function () {\n            Array.prototype.forEach.call(this.selector, function (el) {\n                el.addEventListener('click', function (e) {\n                    e.preventDefault();\n\n                    var link = this.parseUrl(el.getAttribute('href'));\n                    this.render(link);\n                    this.events();\n                }.bind(this), false);\n            }.bind(this));\n\n            this.root.addEventListener('keyup', function (e) {\n                if ((e.keyCode || e.which) === 27) {\n                    this.close(this.root.querySelector('.mediabox-wrap'));\n                }\n            }.bind(this), false);\n        },\n        template: function (s, d) {\n            var p;\n\n            for (p in d) {\n                if (d.hasOwnProperty(p)) {\n                    s = s.replace(new RegExp('{' + p + '}', 'g'), d[p]);\n                }\n            }\n            return s;\n        },\n        parseUrl: function (url) {\n            var service = {},\n                matches;\n\n            if (matches = url.match(/^.*(youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=)([^#\\&\\?]*).*/)) {\n                service.provider = \"youtube\";\n                service.id       = matches[2];\n            } else if (matches = url.match(/https?:\\/\\/(?:www\\.)?vimeo.com\\/(?:channels\\/|groups\\/([^\\/]*)\\/videos\\/|album\\/(\\d+)\\/video\\/|)(\\d+)(?:$|\\/|\\?)/)) {\n                service.provider = \"vimeo\";\n                service.id       = matches[3];\n            } else {\n                service.provider = \"Unknown\";\n                service.id       = '';\n            }\n\n            return service;\n        },\n        render: function (service) {\n            var embedLink,\n                lightbox,\n                urlParams;\n\n            if (service.provider === 'youtube') {\n                embedLink = 'https://www.youtube.com/embed/' + service.id;\n            } else if (service.provider === 'vimeo') {\n                embedLink = 'https://player.vimeo.com/video/' + service.id;\n            } else {\n                throw new Error(\"Invalid video URL\");\n            }\n\n            urlParams = this.serialize(this.params);\n\n            lightbox = this.template(\n                '<div class=\"mediabox-wrap\" role=\"dialog\" aria-hidden=\"false\"><div class=\"mediabox-content\" role=\"document\" tabindex=\"0\"><span id=\"mediabox-esc\" class=\"mediabox-close\" aria-label=\"close\" tabindex=\"1\"></span><iframe src=\"{embed}{params}\" frameborder=\"0\" allowfullscreen></iframe></div></div>', {\n                    embed: embedLink,\n                    params: urlParams\n                });\n\n            this.lastFocusElement = document.activeElement;\n            this.root.insertAdjacentHTML('beforeend', lightbox);\n            document.body.classList.add('stop-scroll');\n        },\n        events: function () {\n            var wrapper = document.querySelector('.mediabox-wrap');\n            var content = document.querySelector('.mediabox-content');\n\n            wrapper.addEventListener('click', function (e) {\n                if (e.target && e.target.nodeName === 'SPAN' && e.target.className === 'mediabox-close' || e.target.nodeName === 'DIV' && e.target.className === 'mediabox-wrap' || (e.target.className === 'mediabox-content' && e.target.nodeName !== 'IFRAME')) {\n                    this.close(wrapper);\n                }\n            }.bind(this), false);\n\n            document.addEventListener('focus', function(e) {\n                if (content && !content.contains(e.target)) {\n                    e.stopPropagation();\n                    content.focus();\n                }\n            }, true);\n\n            content.addEventListener('keypress', function(e) {\n                if (e.keyCode === 13) {\n                    this.close(wrapper);\n                }\n            }.bind(this), false);\n        },\n        close: function (el) {\n            if (el === null) return true;\n            var timer = null;\n\n            if (timer) {\n                clearTimeout(timer);\n            }\n\n            el.classList.add('mediabox-hide');\n\n            timer = setTimeout(function() {\n                var el = document.querySelector('.mediabox-wrap');\n                if (el !== null) {\n                    document.body.classList.remove('stop-scroll');\n                    this.root.removeChild(el);\n                    this.lastFocusElement.focus();\n                }\n            }.bind(this), 500);\n        },\n        serialize: function (obj) {\n            return '?'+Object.keys(obj).reduce(function(a,k){a.push(k+'='+encodeURIComponent(obj[k]));return a},[]).join('&')\n        }\n    };\n\n    return MediaBox;\n}));\n\n/**\n * Object.assign polyfill for IE support\n * Source: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign#Polyfill\n */\nif (typeof Object.assign != 'function') {\n    // Must be writable: true, enumerable: false, configurable: true\n    Object.defineProperty(Object, \"assign\", {\n        value: function assign(target, varArgs) { // .length of function is 2\n        'use strict';\n        if (target == null) { // TypeError if undefined or null\n            throw new TypeError('Cannot convert undefined or null to object');\n        }\n\n        var to = Object(target);\n\n        for (var index = 1; index < arguments.length; index++) {\n            var nextSource = arguments[index];\n\n            if (nextSource != null) { // Skip over if undefined or null\n            for (var nextKey in nextSource) {\n                // Avoid bugs when hasOwnProperty is shadowed\n                if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n                to[nextKey] = nextSource[nextKey];\n                }\n            }\n            }\n        }\n        return to;\n        },\n        writable: true,\n        configurable: true\n    });\n}"]}